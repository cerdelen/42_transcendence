generator client {
	provider = "prisma-client-js"
	binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

generator erd {
	provider = "prisma-erd-generator"
}

datasource backend_database {
	provider	= "postgresql"
	url			= env("DATABASE_URL")
}

// ? means a field is optional

model User {
	// User stuff
	id				Int			@unique
	name			String		@unique
	mail			String
	// chatParticipant	ChatParticipant?	@relation(fields: [chatPtsId], references: [ChatPartId])
	chatId		Int?		@unique		


	// picture			String?

	// 2_FA_stuff
	two_FA_enabled	Boolean    @default(false)
	two_FA_secret	String?
}

model Chat {
	// User stuff
	chat_id					Int					@unique  @id @default(autoincrement()) 
	chat_name			String?		
	chat_msg			Message[]
	// chat_participants	ChatParticipant[]	

	//something to consider later after creating chat
	chat_is_public		Boolean		@default(true)
	chat_pass_protected	Boolean		@default(false)
	chat_password		String?		

	chat_members	Int[]
	chat_owner		Int
	chat_admins		Int[] 
	chat_black_list		Int[]
	chat_mute_list		Int[]
}

// model ChatParticipant {

// 	ChatPartId		Int				@unique @id @default(autoincrement())
// 	// chat			Chat			@relation(fields: [ChatPartId], references: [chat_id])
// 	chat			Chat[]
// 	// user			User?			@relation(fields: [userId], references: [id])
// 	userId			User?			

// 	// @@map(name: "chat_role")
// }

model Message {
	// User stuff
	msg_id				Int			@unique  @id @default(autoincrement()) 
	user_id				Int			@default(0) 
	user_name			String		@default("default_name")
	text				String
	created_at			DateTime	@default(now())

	//necessary fro array of messages in Chat model
	chat_id				Int?			
	chat_relation		Chat?		@relation(fields: [chat_id], references: [chat_id])
}



//  id: Number(id),
//         ecole42Id: Number(id),
//         name: username,
//         achievementsId: 1,
//         mail: email,